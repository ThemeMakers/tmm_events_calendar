!function(mt,yt){var g={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},t={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},q=mt.fullCalendar={version:"1.6.4"},A=q.views={};function e(t){mt.extend(!0,g,t)}function o(e,i,t){var n=this;n.options=i,n.render=function(t){o?_()&&(S(),M(t)):function(){i.theme,e.addClass("fc"),i.isRTL?e.addClass("fc-rtl"):e.addClass("fc-ltr");i.theme&&e.addClass("ui-widget");o=mt("<div class='fc-content' style='position:relative'/>").prependTo(e),r=new Q(n,i),(a=r.render())&&e.prepend(a);b(i.defaultView),i.handleWindowResize&&mt(window).resize(T);w()||y()}()},n.destroy=function(){s&&(z("viewDestroy",s,s,s.element),s.triggerEventDestroy());mt(window).unbind("resize",T),r.destroy(),o.remove(),e.removeClass("fc fc-rtl ui-widget")},n.refetchEvents=function(){H(),j()},n.reportEvents=function(t){m=t,k()},n.reportEventChange=function(t){x(t)},n.rerenderEvents=x,n.changeView=b,n.select=function(t,e,n){s.select(t,e,n===yt||n)},n.unselect=F,n.prev=function(){D(-1)},n.next=function(){D(1)},n.prevYear=function(){L(p,-1),D()},n.nextYear=function(){L(p,1),D()},n.today=function(){p=new Date,D()},n.gotoDate=function(t,e,n){t instanceof Date?p=Ct(t):P(p,t,e,n);D()},n.incrementDate=function(t,e,n){t!==yt&&L(p,t);e!==yt&&I(p,e);n!==yt&&bt(p,n);D()},n.formatDate=function(t,e){return B(t,e,i)},n.formatDates=function(t,e,n){return V(t,e,n,i)},n.getDate=function(){return Ct(p)},n.getView=function(){return s},n.option=function(t,e){if(e===yt)return i[t];"height"!=t&&"contentHeight"!=t&&"aspectRatio"!=t||(i[t]=e,C())},n.trigger=z,function(g,t){var e=this;e.isFetchNeeded=function(t,e){return!h||t<h||p<e},e.fetchEvents=function(t,e){h=t,p=e,c=[];var n=++o,r=i.length;u=r;for(var a=0;a<r;a++)f(i[a],n)},e.addEventSource=function(t){(t=v(t))&&(u++,f(t,o))},e.removeEventSource=function(e){i=mt.grep(i,function(t){return!w(t,e)}),c=mt.grep(c,function(t){return!w(t.source,e)}),l(c)},e.updateEvent=function(t){var e,n,r=c.length,a=s().defaultEventEnd,i=t.start-t._start,o=t.end?t.end-(t._end||a(t)):0;for(e=0;e<r;e++)(n=c[e])._id==t._id&&n!=t&&(n.start=new Date(+n.start+i),t.end?n.end?n.end=new Date(+n.end+o):n.end=new Date(+a(n)+o):n.end=null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroundColor=t.backgroundColor,n.borderColor=t.borderColor,n.textColor=t.textColor,_(n));_(t),l(c)},e.renderEvent=function(t,e){_(t),t.source||(e&&(r.events.push(t),t.source=r),c.push(t));l(c)},e.removeEvents=function(t){if(t){var e;mt.isFunction(t)||(e=t+"",t=function(t){return t._id==e}),c=mt.grep(c,t,!0);for(n=0;n<i.length;n++)mt.isArray(i[n].events)&&(i[n].events=mt.grep(i[n].events,t,!0))}else{c=[];for(var n=0;n<i.length;n++)mt.isArray(i[n].events)&&(i[n].events=[])}l(c)},e.clientEvents=function(e){{if(mt.isFunction(e))return mt.grep(c,e);if(e)return e+="",mt.grep(c,function(t){return t._id==e})}return c},e.normalizeEvent=_;for(var h,p,n=e.trigger,s=e.getView,l=e.reportEvents,r={events:[]},i=[r],o=0,u=0,a=0,c=[],d=0;d<t.length;d++)v(t[d]);function f(n,r){!function t(e,n){var r;var a=q.sourceFetchers;var i;for(r=0;r<a.length;r++){if(!0===(i=a[r](e,h,p,n)))return;if("object"==typeof i)return void t(i,n)}var o=e.events;{var s,l,u,c,d,f,v;o?mt.isFunction(o)?(m(),o(Ct(h),Ct(p),function(t){n(t),y()})):mt.isArray(o)?n(o):n():e.url?(s=e.success,l=e.error,u=e.complete,c=mt.isFunction(e.data)?e.data():e.data,d=mt.extend({},c||{}),f=U(e.startParam,g.startParam),v=U(e.endParam,g.endParam),f&&(d[f]=Math.round(h/1e3)),v&&(d[v]=Math.round(p/1e3)),m(),mt.ajax(mt.extend({},O,e,{data:d,success:function(t){t=t||[];var e=J(s,this,arguments);mt.isArray(e)&&(t=e),n(t)},error:function(){J(l,this,arguments),n()},complete:function(){J(u,this,arguments),y()}}))):n()}}(n,function(t){if(r==o){if(t){g.eventDataTransform&&(t=mt.map(t,g.eventDataTransform)),n.eventDataTransform&&(t=mt.map(t,n.eventDataTransform));for(var e=0;e<t.length;e++)t[e].source=n,_(t[e]);c=c.concat(t)}--u||l(c)}})}function v(t){if(mt.isFunction(t)||mt.isArray(t)?t={events:t}:"string"==typeof t&&(t={url:t}),"object"==typeof t)return function(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=q.sourceNormalizers,n=0;n<e.length;n++)e[n](t)}(t),i.push(t),t}function m(){a++||n("loading",null,!0,s())}function y(){--a||n("loading",null,!1,s())}function _(t){var e=t.source||{},n=U(e.ignoreTimezone,g.ignoreTimezone);t._id=t._id||(t.id===yt?"_fc"+W++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=Ct(t.start=Y(t.start,n)),t.end=Y(t.end,n),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?Ct(t.end):null,t.allDay===yt&&(t.allDay=U(e.allDayDefault,g.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function w(t,e){return t&&e&&b(t)==b(e)}function b(t){return("object"==typeof t?t.events||t.url:"")||t}}.call(n,i,t);var r,a,o,s,l,u,c,d=n.isFetchNeeded,f=n.fetchEvents,v=e[0],g=0,h=0,p=new Date,m=[];function y(){setTimeout(function(){!s.start&&w()&&D()},0)}function _(){return e.is(":visible")}function w(){return mt("body").is(":visible")}function b(t){s&&t==s.name||function(t){h++,s&&(z("viewDestroy",s,s,s.element),F(),s.triggerEventDestroy(),R(),s.element.remove(),r.deactivateButton(s.name));r.activateButton(t),s=new A[t](mt("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(o),n),D(),N(),h--}(t)}function D(t){(!s.start||t||p<s.start||p>=s.end)&&_()&&M(t)}function M(t){var e;h++,s.start&&(z("viewDestroy",s,s,s.element),F(),H()),R(),s.render(p,t||0),E(),N(),(s.afterRender||function(){})(),r.updateTitle(s.title),(e=new Date)>=s.start&&e<s.end?r.disableButton("today"):r.enableButton("today"),z("viewRender",s,s,s.element),s.trigger("viewDisplay",v),h--,(!i.lazyFetching||d(s.visStart,s.visEnd)?j:k)()}function C(){_()&&(F(),H(),S(),E(),k())}function S(){u=i.contentHeight?i.contentHeight:i.height?i.height-(a?a.height():0)-Rt(o):Math.round(o.width()/Math.max(i.aspectRatio,.5))}function E(){u===yt&&S(),h++,s.setHeight(u),s.setWidth(o.width()),h--,l=e.outerWidth()}function T(){var t;h||(s.start?(t=++g,setTimeout(function(){t==g&&!h&&_()&&l!=(l=e.outerWidth())&&(h++,C(),s.trigger("windowResize",v),h--)},200)):y())}function x(t){H(),k(t)}function k(t){_()&&(s.setEventData(m),s.renderEvents(m,t),s.trigger("eventAfterAllRender"))}function H(){s.triggerEventDestroy(),s.clearEvents(),s.clearEventData()}function j(){f(s.visStart,s.visEnd)}function F(){s&&s.unselect()}function R(){o.css({width:"100%",height:o.height(),overflow:"hidden"})}function N(){o.css({width:"",height:"",overflow:""})}function z(t,e){if(i[t])return i[t].apply(e||v,Array.prototype.slice.call(arguments,2))}P(p,i.year,i.month,i.date),i.droppable&&mt(document).bind("dragstart",function(t,e){var n,r=t.target,a=mt(r);a.parents(".fc").length||(n=i.dropAccept,(mt.isFunction(n)?n.call(r,a):a.is(n))&&(c=r,s.dragStart(c,t,e)))}).bind("dragstop",function(t,e){c&&(s.dragStop(c,t,e),c=null)})}function Q(l,u){var t=this;t.render=function(){if(c=u.theme?"ui":"fc",u.header)return e=mt("<table class='fc-header' style='width:100%'/>").append(mt("<tr/>").append(n("left")).append(n("center")).append(n("right")))},t.destroy=function(){e.remove()},t.updateTitle=function(t){e.find("h2").html(t)},t.activateButton=function(t){e.find("span.fc-button-"+t).addClass(c+"-state-active")},t.deactivateButton=function(t){e.find("span.fc-button-"+t).removeClass(c+"-state-active")},t.disableButton=function(t){e.find("span.fc-button-"+t).addClass(c+"-state-disabled")},t.enableButton=function(t){e.find("span.fc-button-"+t).removeClass(c+"-state-disabled")};var c,e=mt([]);function n(t){var s=mt("<td class='fc-header-"+t+"'/>"),e=u.header[t];return e&&mt.each(e.split(" "),function(t){var o;0<t&&s.append("<span class='fc-header-space'/>"),mt.each(this.split(","),function(t,e){var n,r,a,i;"title"==e?(s.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),o&&o.addClass(c+"-corner-right"),o=null):(l[e]?n=l[e]:A[e]&&(n=function(){i.removeClass(c+"-state-hover"),l.changeView(e)}),n&&(r=u.theme?k(u.buttonIcons,e):null,a=k(u.buttonText,e),qt(i=mt("<span class='fc-button fc-button-"+e+" "+c+"-state-default'>"+(r?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+r+"'/></span>":a)+"</span>").click(function(){i.hasClass(c+"-state-disabled")||n()}).mousedown(function(){i.not("."+c+"-state-active").not("."+c+"-state-disabled").addClass(c+"-state-down")}).mouseup(function(){i.removeClass(c+"-state-down")}).hover(function(){i.not("."+c+"-state-active").not("."+c+"-state-disabled").addClass(c+"-state-hover")},function(){i.removeClass(c+"-state-hover").removeClass(c+"-state-down")}).appendTo(s)),o||i.addClass(c+"-corner-left"),o=i))}),o&&o.addClass(c+"-corner-right")}),s}}mt.fn.fullCalendar=function(a){if("string"==typeof a){var n,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var t,e=mt.data(this,"fullCalendar");e&&mt.isFunction(e[a])&&(t=e[a].apply(e,r),n===yt&&(n=t),"destroy"==a&&mt.removeData(this,"fullCalendar"))}),n!==yt?n:this}var i=(a=a||{}).eventSources||[];return delete a.eventSources,a.events&&(i.push(a.events),delete a.events),a=mt.extend(!0,{},g,a.isRTL||a.isRTL===yt&&g.isRTL?t:{},a),this.each(function(t,e){var n=mt(e),r=new o(n,a,i);n.data("fullCalendar",r),r.render()}),this},q.sourceNormalizers=[];var O={dataType:"json",cache:!(q.sourceFetchers=[])},W=1;q.addDays=bt,q.cloneDate=Ct,q.parseDate=Y,q.parseISO8601=G,q.parseTime=Tt,q.formatDate=B,q.formatDates=V;var _t=["sun","mon","tue","wed","thu","fri","sat"],n=864e5,r=36e5,wt=6e4;function L(t,e,n){return t.setFullYear(t.getFullYear()+e),n||Mt(t),t}function I(t,e,n){if(+t){var r=t.getMonth()+e,a=Ct(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||Mt(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(t<a?1:-1))}return t}function bt(t,e,n){var r,a;return+t&&(r=t.getDate()+e,(a=Ct(t)).setHours(9),a.setDate(r),t.setDate(r),n||Mt(t),s(t,a)),t}function s(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(t<e?1:-1)*r)}function Dt(t,e){return t.setMinutes(t.getMinutes()+e),t}function Mt(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function Ct(t,e){return e?Mt(new Date(+t)):new Date(+t)}function St(){for(var t,e=0;(t=new Date(1970,e++,1)).getHours(););return t}function Et(t,e){return Math.round((Ct(t,!0)-Ct(e,!0))/n)}function P(t,e,n,r){e!==yt&&e!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(e)),n!==yt&&n!=t.getMonth()&&(t.setDate(1),t.setMonth(n)),r!==yt&&t.setDate(r)}function Y(t,e){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(e===yt&&(e=!0),G(t,e)||(t?new Date(t):null)):null}function G(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r,a,i=new Date(n[1],0,1);return e||!n[13]?(r=new Date(n[1],0,1,9,0),n[3]&&(i.setMonth(n[3]-1),r.setMonth(n[3]-1)),n[5]&&(i.setDate(n[5]),r.setDate(n[5])),s(i,r),n[7]&&i.setHours(n[7]),n[8]&&i.setMinutes(n[8]),n[10]&&i.setSeconds(n[10]),n[12]&&i.setMilliseconds(1e3*Number("0."+n[12])),s(i,r)):(i.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),i.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]&&(a=60*Number(n[16])+(n[18]?Number(n[18]):0),a*="-"==n[15]?1:-1,i=new Date(+i+60*a*1e3))),i}function Tt(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function B(t,e,n){return V(t,null,e,n)}function V(t,e,n,r){r=r||g;for(var a,i,o,s=t,l=e,u=n.length,c="",d=0;d<u;d++)if("'"==(a=n.charAt(d))){for(i=d+1;i<u;i++)if("'"==n.charAt(i)){s&&(c+=i==d+1?"'":n.substring(d+1,i),d=i);break}}else if("("==a){for(i=d+1;i<u;i++)if(")"==n.charAt(i)){var f=B(s,n.substring(d+1,i),r);parseInt(f.replace(/\D/,""),10)&&(c+=f),d=i;break}}else if("["==a){for(i=d+1;i<u;i++)if("]"==n.charAt(i)){var v=n.substring(d+1,i);(f=B(s,v,r))!=B(l,v,r)&&(c+=f),d=i;break}}else if("{"==a)s=e,l=t;else if("}"==a)s=t,l=e;else{for(i=u;d<i;i--)if(o=h[n.substring(d,i)]){s&&(c+=o(s,r)),d=i-1;break}i==d&&s&&(c+=a)}return c}var h={s:function(t){return t.getSeconds()},ss:function(t){return a(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return a(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return a(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return a(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return a(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return a(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return B(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return!(10<e&&e<20)&&["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return(n=new Date(t.getTime())).setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1;var e,n}};function xt(t){return t.end?(e=t.end,n=t.allDay,e=Ct(e),n||e.getHours()||e.getMinutes()?bt(e,1):Mt(e)):bt(Ct(t.start),1);var e,n}function kt(t,i,o){t.unbind("mouseover").mouseover(function(t){for(var e,n,r,a=t.target;a!=this;)a=(e=a).parentNode;(n=e._fci)!==yt&&(e._fci=yt,r=i[n],o(r.event,r.element,r),mt(t.target).trigger(t)),t.stopPropagation()})}function Ht(t,e,n){for(var r,a=0;a<t.length;a++)(r=mt(t[a])).width(Math.max(0,e-Ft(r,n)))}function jt(t,e,n){for(var r,a=0;a<t.length;a++)(r=mt(t[a])).height(Math.max(0,e-Rt(r,n)))}function Ft(t,e){return a=t,(parseFloat(mt.css(a[0],"paddingLeft",!0))||0)+(parseFloat(mt.css(a[0],"paddingRight",!0))||0)+(r=t,(parseFloat(mt.css(r[0],"borderLeftWidth",!0))||0)+(parseFloat(mt.css(r[0],"borderRightWidth",!0))||0))+(e?(n=t,(parseFloat(mt.css(n[0],"marginLeft",!0))||0)+(parseFloat(mt.css(n[0],"marginRight",!0))||0)):0);var n,r,a}function Rt(t,e){return a=t,(parseFloat(mt.css(a[0],"paddingTop",!0))||0)+(parseFloat(mt.css(a[0],"paddingBottom",!0))||0)+(r=t,(parseFloat(mt.css(r[0],"borderTopWidth",!0))||0)+(parseFloat(mt.css(r[0],"borderBottomWidth",!0))||0))+(e?(n=t,(parseFloat(mt.css(n[0],"marginTop",!0))||0)+(parseFloat(mt.css(n[0],"marginBottom",!0))||0)):0);var n,r,a}function Nt(t,e){return t-e}function X(t){return Math.max.apply(Math,t)}function a(t){return(t<10?"0":"")+t}function k(t,e){if(t[e]!==yt)return t[e];for(var n,r=e.split(/(?=[A-Z])/),a=r.length-1;0<=a;a--)if((n=t[r[a].toLowerCase()])!==yt)return n;return t[""]}function zt(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function qt(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function At(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function Qt(t,e){var n=t.source||{},r=t.color,a=n.color,i=e("eventColor"),o=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||i,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||i,l=t.textColor||n.textColor||e("eventTextColor"),u=[];return o&&u.push("background-color:"+o),s&&u.push("border-color:"+s),l&&u.push("color:"+l),u.join(";")}function J(t,e,n){if(mt.isFunction(t)&&(t=[t]),t){for(var r,a=0;a<t.length;a++)r=t[a].apply(e,n)||r;return r}}function U(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==yt)return arguments[t]}function p(i,t,e){var o=this;o.renderBasic=function(t,e,n){m=t,y=e,_=n,C=k("theme")?"ui":"fc",S=k("columnFormat"),E=k("weekNumbers"),T=k("weekNumberTitle"),x="iso"!=k("weekNumberCalculation")?"w":"W",a||(g=mt("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(i));!function(){var t="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+function(){var t,e,n=C+"-widget-header",r="";r+="<thead><tr>",E&&(r+="<th class='fc-week-number "+n+"'>"+zt(T)+"</th>");for(t=0;t<y;t++)e=N(0,t),r+="<th class='fc-day-header fc-"+_t[e.getDay()]+" "+n+"'>"+zt(A(e,S))+"</th>";return r+="</tr></thead>"}()+function(){var t,e,n,r=C+"-widget-content",a="";for(a+="<tbody>",t=0;t<m;t++){for(a+="<tr class='fc-week'>",E&&(n=N(t,0),a+="<td class='fc-week-number "+r+"'><div>"+zt(A(n,x))+"</div></td>"),e=0;e<y;e++)n=N(t,e),a+=function(t){var e=C+"-widget-content",n=o.start.getMonth(),r=Mt(new Date),a="",i=["fc-day","fc-"+_t[t.getDay()],e];t.getMonth()!=n&&i.push("fc-other-month");+t==+r?i.push("fc-today",C+"-state-highlight"):t<r?i.push("fc-past"):i.push("fc-future");a+="<td class='"+i.join(" ")+"' data-date='"+A(t,"yyyy-MM-dd")+"'><div>",_&&(a+="<div class='fc-day-number'>"+t.getDate()+"</div>");return a+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}(n);a+="</tr>"}return a+="</tbody>"}()+"</table>";r&&r.remove();r=mt(t).appendTo(i),s=r.find("thead"),l=s.find(".fc-day-header"),a=r.find("tbody"),u=a.find("tr"),c=a.find(".fc-day"),d=u.find("td:first-child"),f=u.eq(0).find(".fc-day > div"),v=u.eq(0).find(".fc-day-content > div"),At(s.add(s.find("tr"))),At(u),u.eq(0).addClass("fc-first"),u.filter(":last").addClass("fc-last"),c.each(function(t,e){var n=N(Math.floor(t/y),t%y);H("dayRender",o,n,mt(e))}),Q(c)}()},o.setHeight=function(t){var n,r,a,e=t-s.height();"variable"==k("weekMode")?n=r=Math.floor(e/(1==m?2:6)):(n=Math.floor(e/m),r=e-n*(m-1));d.each(function(t,e){t<m&&(a=mt(e)).find("> div").css("min-height",(t==m-1?r:n)-Rt(a))})},o.setWidth=function(t){n=t,D.clear(),M.clear(),p=0,E&&(p=s.find("th.fc-week-number").outerWidth());h=Math.floor((n-p)/y),Ht(l.slice(0,-1),h)},o.renderDayOverlay=W,o.defaultSelectionEnd=function(t,e){return Ct(t)},o.renderSelection=function(t,e,n){W(t,bt(Ct(e),1),!0)},o.clearSelection=function(){F()},o.reportDayClick=function(t,e,n){var r=z(t),a=c[r.row*y+r.col];H("dayClick",a,t,e,n)},o.dragStart=function(t,e,n){b.start(function(t){F(),t&&L(t.row,t.col,t.row,t.col)},e)},o.dragStop=function(t,e,n){var r=b.stop();{var a;F(),r&&(a=N(r),H("drop",t,a,!0,e,n))}},o.defaultEventEnd=function(t){return Ct(t.start)},o.getHoverListener=function(){return b},o.colLeft=function(t){return D.left(t)},o.colRight=function(t){return D.right(t)},o.colContentLeft=function(t){return M.left(t)},o.colContentRight=function(t){return M.right(t)},o.getIsCellAllDay=function(){return!0},o.allDayRow=function(t){return u.eq(t)},o.getRowCnt=function(){return m},o.getColCnt=function(){return y},o.getColWidth=function(){return h},o.getDaySegmentContainer=function(){return g},It.call(o,i,t,e),Gt.call(o),Yt.call(o),function(){var n=this;n.renderEvents=function(t,e){n.renderDayEvents(t,e)},n.clearEvents=function(){n.getDaySegmentContainer().empty()},Pt.call(n)}.call(o);var r,s,l,a,u,c,d,f,v,g,n,h,p,m,y,_,w,b,D,M,C,S,E,T,x,k=o.opt,H=o.trigger,j=o.renderOverlay,F=o.clearOverlays,R=o.daySelectionMousedown,N=o.cellToDate,z=o.dateToCell,q=o.rangeToSegments,A=t.formatDate;function Q(t){t.click(O).mousedown(R)}function O(t){var e;k("selectable")||(e=G(mt(this).data("date")),H("dayClick",this,e,!0,t))}function W(t,e,n){n&&w.build();for(var r=q(t,e),a=0;a<r.length;a++){var i=r[a];Q(L(i.row,i.leftCol,i.row,i.rightCol))}}function L(t,e,n,r){var a=w.rect(t,e,n,r,i);return j(a,i)}qt(i.addClass("fc-grid")),w=new Bt(function(n,r){var a,i,o;l.each(function(t,e){a=mt(e),i=a.offset().left,t&&(o[1]=i),o=[i],r[t]=o}),o[1]=i+a.outerWidth(),u.each(function(t,e){t<m&&(a=mt(e),i=a.offset().top,t&&(o[1]=i),o=[i],n[t]=o)}),o[1]=i+a.outerHeight()}),b=new Vt(w),D=new Xt(function(t){return f.eq(t)}),M=new Xt(function(t){return v.eq(t)})}function v(l,t,e){var n=this;n.renderAgenda=function(t){H=t,function(){q=Y("theme")?"ui":"fc",A=Y("isRTL"),Q=Tt(Y("minTime")),O=Tt(Y("maxTime")),W=Y("columnFormat"),L=Y("weekNumbers"),I=Y("weekNumberTitle"),P="iso"!=Y("weekNumberCalculation")?"w":"W";T=Y("snapMinutes")||Y("slotMinutes")}(),(o?rt:function(){var t,e,n,r,a,i=q+"-widget-header",o=q+"-widget-content",s=Y("slotMinutes")%15==0;rt(),v=mt("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(l),Y("allDaySlot")?(g=mt("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(v),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+i+" fc-agenda-axis'>"+Y("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+i+" fc-agenda-gutter'>&nbsp;</th></tr></table>",h=mt(t).appendTo(v),at((p=h.find("tr")).find("td")),v.append("<div class='fc-agenda-divider "+i+"'><div class='fc-agenda-divider-inner'/></div>")):g=mt([]);for(m=mt("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(v),y=mt("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(m),_=mt("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(y),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",e=St(),r=Dt(Ct(e),O),Dt(e,Q),n=j=0;e<r;n++)a=e.getMinutes(),t+="<tr class='fc-slot"+n+" "+(a?"fc-minor":"")+"'><th class='fc-agenda-axis "+i+"'>"+(s&&a?"&nbsp;":et(e,Y("axisFormat")))+"</th><td class='"+o+"'><div style='position:relative'>&nbsp;</div></td></tr>",Dt(e,Y("slotMinutes")),j++;it((w=mt(t+="</tbody></table>").appendTo(y)).find("td"))})()},n.setWidth=function(t){N.clear(),z.clear();var e=a.find("th:first");h&&(e=e.add(h.find("th:first")));e=e.add(w.find("th:first")),M=0,Ht(e.width("").each(function(t,e){M=Math.max(M,mt(e).outerWidth())}),M);var n=o.find(".fc-agenda-gutter");h&&(n=n.add(h.find("th.fc-agenda-gutter")));var r=m[0].clientWidth;(S=m.width()-r)?(Ht(n,S),n.show().prev().removeClass("fc-last")):n.hide().prev().addClass("fc-last");C=Math.floor((r-M)/H),Ht(c.slice(0,-1),C)},n.setHeight=function(t){t===yt&&(t=D);D=t,nt={};var e=i.position().top,n=m.position().top,r=Math.min(t-e,w.height()+n+1);f.height(r-Rt(d)),v.css("top",e),m.height(r-n-1),E=w.find("tr:first").height()+1,x=Y("slotMinutes")/T,k=E/x},n.afterRender=function(){!function(){var t=St(),e=Ct(t);e.setHours(Y("firstHour"));var n=ft(t,e)+1;function r(){m.scrollTop(n)}r(),setTimeout(r,0)}()},n.defaultEventEnd=function(t){var e=Ct(t.start);if(t.allDay)return e;return Dt(e,Y("defaultEventMinutes"))},n.timePosition=ft,n.getIsCellAllDay=ct,n.allDayRow=function(t){return p},n.getCoordinateGrid=function(){return F},n.getHoverListener=function(){return R},n.colLeft=function(t){return N.left(t)},n.colRight=function(t){return N.right(t)},n.colContentLeft=function(t){return z.left(t)},n.colContentRight=function(t){return z.right(t)},n.getDaySegmentContainer=function(){return g},n.getSlotSegmentContainer=function(){return _},n.getMinMinute=function(){return Q},n.getMaxMinute=function(){return O},n.getSlotContainer=function(){return y},n.getRowCnt=function(){return 1},n.getColCnt=function(){return H},n.getColWidth=function(){return C},n.getSnapHeight=function(){return k},n.getSnapMinutes=function(){return T},n.defaultSelectionEnd=function(t,e){if(e)return Ct(t);return Dt(Ct(t),Y("slotMinutes"))},n.renderDayOverlay=st,n.renderSelection=function(t,e,n){n?Y("allDaySlot")&&st(t,bt(Ct(e),1),!0):vt(t,e)},n.clearSelection=gt,n.reportDayClick=pt,n.dragStart=function(t,e,n){R.start(function(t){var e;V(),t&&(ct(t)?lt(t.row,t.col,t.row,t.col):ut(e=dt(t),Dt(Ct(e),Y("defaultEventMinutes"))))},e)},n.dragStop=function(t,e,n){var r=R.stop();V(),r&&G("drop",t,dt(r),ct(r),e,n)},It.call(n,l,t,e),Gt.call(n),Yt.call(n),function(){var j=this;j.renderEvents=function(t,e){var n,r=t.length,a=[],i=[];for(n=0;n<r;n++)t[n].allDay?a.push(t[n]):i.push(t[n]);F("allDaySlot")&&(s(a,e),o());!function(t,e){var n,r,a,i,o,s,l,u,c,d,f,v,g,h,p,m,y=t.length,_="",w=D(),b=F("isRTL");for(n=0;n<y;n++)r=t[n],a=r.event,i=M(r.start,r.start),o=M(r.start,r.end),s=C(r.col),l=S(r.col),c=(u=(l-=.025*(u=l-s))-s)*(r.forwardCoord-r.backwardCoord),F("slotEventOverlap")&&(c=Math.max(2*(c-10),c)),b?(f=l-r.backwardCoord*u,d=f-c):(d=s+r.backwardCoord*u,f=d+c),d=Math.max(d,s),f=Math.min(f,l),c=f-d,r.top=i,r.left=d,r.outerWidth=c,r.outerHeight=o-i,_+=x(a,r);for(w[0].innerHTML=_,v=w.children(),n=0;n<y;n++)r=t[n],a=r.event,g=mt(v[n]),!1===(h=R("eventRender",a,a,g))?g.remove():(h&&!0!==h&&(g.remove(),g=mt(h).css({position:"absolute",top:r.top,left:r.left}).appendTo(w)),r.element=g,a._id===e?k(a,g,r):g[0]._fci=n,E(a,g));for(kt(w,t,k),n=0;n<y;n++)r=t[n],(g=r.element)&&(r.vsides=Rt(g,!0),r.hsides=Ft(g,!0),(p=g.find(".fc-event-title")).length&&(r.contentTop=p[0].offsetTop));for(n=0;n<y;n++)r=t[n],(g=r.element)&&(g[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px",m=Math.max(0,r.outerHeight-r.vsides),g[0].style.height=m+"px",a=r.event,r.contentTop!==yt&&m-r.contentTop<10&&(g.find("div.fc-event-time").text(T(a.start,F("timeFormat"))+" - "+a.title),g.find("div.fc-event-title").remove()),R("eventAfterRender",a,a,g))}(function(t){var e,n,r,a,i,o=W(),s=h(),l=d(),u=mt.map(t,f),c=[];for(n=0;n<o;n++)for(Dt(e=O(0,n),s),i=function(t){var e,n=function(t){var e,n,r,a=[];for(e=0;e<t.length;e++){for(n=t[e],r=0;r<a.length&&Ot(n,a[r]).length;r++);(a[r]||(a[r]=[])).push(n)}return a}(t),r=n[0];if(function(t){var e,n,r,a,i;for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)for((a=n[r]).forwardSegs=[],i=e+1;i<t.length;i++)Ot(a,t[i],a.forwardSegs)}(n),r){for(e=0;e<r.length;e++)!function t(e){var n=e.forwardSegs;var r=0;var a,i;if(e.forwardPressure===yt){for(a=0;a<n.length;a++)i=n[a],t(i),r=Math.max(r,1+i.forwardPressure);e.forwardPressure=r}}(r[e]);for(e=0;e<r.length;e++)!function t(e,n,r){var a=e.forwardSegs;var i;if(e.forwardCoord===yt)for(a.length?(a.sort(Wt),t(a[0],n+1,r),e.forwardCoord=a[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-r)/(n+1),i=0;i<a.length;i++)t(a[i],0,e.forwardCoord)}(r[e],0,0)}return function(t){var e,n,r,a=[];for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)a.push(n[r]);return a}(n)}(i=function(t,e,n,r){var a,i,o,s,l,u,c,d,f=[],v=t.length;for(a=0;a<v;a++)i=t[a],o=i.start,s=e[a],n<s&&o<r&&(c=o<n?(l=Ct(n),!1):(l=o,!0),d=r<s?(u=Ct(r),!1):(u=s,!0),f.push({event:i,start:l,end:u,isStart:c,isEnd:d}));return f.sort(Lt)}(t,u,e,Dt(Ct(e),l-s))),r=0;r<i.length;r++)(a=i[r]).col=n,c.push(a);return c}(i),e)},j.clearEvents=function(){t().empty(),D().empty()},j.slotSegHtml=x,Pt.call(j);var F=j.opt,R=j.trigger,N=j.isEventDraggable,z=j.isEventResizable,q=j.eventEnd,A=j.eventElementHandlers,o=j.setHeight,t=j.getDaySegmentContainer,D=j.getSlotSegmentContainer,e=j.getHoverListener,d=j.getMaxMinute,h=j.getMinMinute,M=j.timePosition,Q=j.getIsCellAllDay,C=j.colContentLeft,S=j.colContentRight,O=j.cellToDate,W=j.getColCnt,L=j.getColWidth,I=j.getSnapHeight,P=j.getSnapMinutes,p=j.getSlotContainer,E=j.reportEventElement,Y=j.showEvents,G=j.hideEvents,B=j.eventDrop,V=j.eventResize,X=j.renderDayOverlay,J=j.clearOverlays,s=j.renderDayEvents,n=j.calendar,T=n.formatDate,U=n.formatDates;function f(t){return t.end?Ct(t.end):Dt(Ct(t.start),F("defaultEventMinutes"))}function x(t,e){var n="<",r=t.url,a=Qt(t,F),i=["fc-event","fc-event-vert"];return N(t)&&i.push("fc-event-draggable"),e.isStart&&i.push("fc-event-start"),e.isEnd&&i.push("fc-event-end"),i=i.concat(t.className),t.source&&(i=i.concat(t.source.className||[])),n+=r?"a href='"+zt(t.url)+"'":"div",n+=" class='"+i.join(" ")+"' style='position:absolute;top:"+e.top+"px;left:"+e.left+"px;"+a+"'><div class='fc-event-inner'><div class='fc-event-time'>"+zt(U(t.start,t.end,F("timeFormat")))+"</div><div class='fc-event-title'>"+zt(t.title||"")+"</div></div><div class='fc-event-bg'></div>",e.isEnd&&z(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function k(t,e,n){var r,o,a,s,l,u,c,d,f,v,g,h,p,m,y,_,w,b,D,i,M,C,S,E,T,x,k=e.find("div.fc-event-time");function H(){J(),u&&(d?(a.hide(),o.draggable("option","grid",null),X(bt(Ct(r.start),h),bt(xt(r),h))):(function(t){var e,n=Dt(Ct(r.start),t);r.end&&(e=Dt(Ct(r.end),t));a.text(U(n,e,F("timeFormat")))}(p),a.css("display",""),o.draggable("option","grid",[w,b])))}N(t)&&(r=t,o=e,a=k,y=j.getCoordinateGrid(),_=W(),w=L(),b=I(),D=P(),o.draggable({scroll:!1,grid:[w,b],axis:1==_&&"y",opacity:F("dragOpacity"),revertDuration:F("dragRevertDuration"),start:function(t,e){R("eventDragStart",o,r,t,e),G(r,o),y.build(),s=o.position(),l=y.cell(t.pageX,t.pageY),u=c=!0,d=f=Q(l),v=g=0,p=m=h=0},drag:function(t,e){var n,r,a,i=y.cell(t.pageX,t.pageY);(u=!!i)&&(d=Q(i),(v=Math.round((e.position.left-s.left)/w))!=g&&(n=O(0,l.col),r=l.col+v,r=Math.max(0,r),r=Math.min(_-1,r),a=O(0,r),h=Et(a,n)),d||(p=Math.round((e.position.top-s.top)/b)*D)),u==c&&d==f&&v==g&&p==m||(H(),c=u,f=d,g=v,m=p),o.draggable("option","revert",!u)},stop:function(t,e){J(),R("eventDragStop",o,r,t,e),u&&(d||h||p)?B(this,r,h,d?0:p,d,t,e):(d=!(u=!0),p=h=v=0,H(),o.css("filter",""),o.css(s),Y(r,o))}})),n.isEnd&&z(t)&&(i=t,M=e,C=k,T=I(),x=P(),M.resizable({handles:{s:".ui-resizable-handle"},grid:T,start:function(t,e){S=E=0,G(i,M),R("eventResizeStart",this,i,t,e)},resize:function(t,e){(S=Math.round((Math.max(T,M.height())-e.originalSize.height)/T))!=E&&(C.text(U(i.start,S||i.end?Dt(q(i),x*S):null,F("timeFormat"))),E=S)},stop:function(t,e){R("eventResizeStop",this,i,t,e),S?V(this,i,0,x*S,t,e):Y(i,M)}})),A(t,e)}j.draggableDayEvent=function(a,i,t){var n,o,s,l=t.isStart,u=!0,r=e(),c=L(),d=I(),f=P(),v=h();function g(){u||(i.width(n).height("").draggable("option","grid",null),u=!0)}i.draggable({opacity:F("dragOpacity","month"),revertDuration:F("dragRevertDuration"),start:function(t,e){R("eventDragStart",i,a,t,e),G(a,i),n=i.width(),r.start(function(t,e){var n,r;J(),o=t?(o=!1,n=O(0,e.col),r=O(0,t.col),s=Et(r,n),t.row?l?u&&(i.width(c-10),jt(i,d*Math.round((a.end?(a.end-a.start)/wt:F("defaultEventMinutes"))/f)),i.draggable("option","grid",[c,1]),u=!1):o=!0:(X(bt(Ct(a.start),s),bt(xt(a),s)),g()),o||u&&!s):(g(),!0),i.draggable("option","revert",o)},t,"drag")},stop:function(t,e){var n;r.stop(),J(),R("eventDragStop",i,a,t,e),o?(g(),i.css("filter",""),Y(a,i)):(n=0,u||(n=Math.round((i.offset().top-p().offset().top)/d)*f+v-(60*a.start.getHours()+a.start.getMinutes())),B(this,a,s,n,u,t,e))}})}}.call(n);var o,a,c,i,s,r,u,d,f,v,g,h,p,m,y,_,w,b,D,M,C,S,E,T,x,k,H,j,F,R,N,z,q,A,Q,O,W,L,I,P,Y=n.opt,G=n.trigger,B=n.renderOverlay,V=n.clearOverlays,X=n.reportSelection,J=n.unselect,U=n.daySelectionMousedown,K=n.slotSegHtml,Z=n.cellToDate,$=n.dateToCell,tt=n.rangeToSegments,et=t.formatDate,nt={};function rt(){var t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+function(){var t,e,n,r=q+"-widget-header",a="";a+="<thead><tr>",L?(t=Z(0,0),e=et(t,P),A?e+=I:e=I+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+zt(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'>&nbsp;</th>";for(n=0;n<H;n++)t=Z(0,n),a+="<th class='fc-"+_t[t.getDay()]+" fc-col"+n+" "+r+"'>"+zt(et(t,W))+"</th>";return a+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th></tr></thead>"}()+function(){var t,e,n,r,a,i=q+"-widget-header",o=q+"-widget-content",s=Mt(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+i+"'>&nbsp;</th>",n="",e=0;e<H;e++)t=Z(0,e),a=["fc-col"+e,"fc-"+_t[t.getDay()],o],+t==+s?a.push(q+"-state-highlight","fc-today"):t<s?a.push("fc-past"):a.push("fc-future"),r="<td class='"+a.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",n+=r;return l+=n,l+="<td class='fc-agenda-gutter "+o+"'>&nbsp;</td></tr></tbody>"}()+"</table>";o&&o.remove(),o=mt(t).appendTo(l),a=o.find("thead"),c=a.find("th").slice(1,-1),i=o.find("tbody"),s=i.find("td").slice(0,-1),r=s.find("> div"),u=s.find(".fc-day-content > div"),d=s.eq(0),f=r.eq(0),At(a.add(a.find("tr"))),At(i.add(i.find("tr")))}function at(t){t.click(ot).mousedown(U)}function it(t){t.click(ot).mousedown(ht)}function ot(t){var e,n,r,a,i;Y("selectable")||(e=Math.min(H-1,Math.floor((t.pageX-o.offset().left-M)/C)),n=Z(0,e),(r=this.parentNode.className.match(/fc-slot(\d+)/))?(a=parseInt(r[1])*Y("slotMinutes"),i=Math.floor(a/60),n.setHours(i),n.setMinutes(a%60+Q),G("dayClick",s[e],n,!1,t)):G("dayClick",s[e],n,!0,t))}function st(t,e,n){n&&F.build();for(var r=tt(t,e),a=0;a<r.length;a++){var i=r[a];at(lt(i.row,i.leftCol,i.row,i.rightCol))}}function lt(t,e,n,r){var a=F.rect(t,e,n,r,v);return B(a,v)}function ut(t,e){for(var n=0;n<H;n++){var r,a,i,o=Z(0,n),s=bt(Ct(o),1),l=new Date(Math.max(o,t)),u=new Date(Math.min(s,e));l<u&&(r=F.rect(0,n,0,n,y),a=ft(o,l),i=ft(o,u),r.top=a,r.height=i-a,it(B(r,y)))}}function ct(t){return Y("allDaySlot")&&!t.row}function dt(t){var e=Z(0,t.col),n=t.row;return Y("allDaySlot")&&n--,0<=n&&Dt(e,Q+n*T),e}function ft(t,e){if(t=Ct(t,!0),e<Dt(Ct(t),Q))return 0;if(e>=Dt(Ct(t),O))return w.height();var n=Y("slotMinutes"),r=60*e.getHours()+e.getMinutes()-Q,a=Math.floor(r/n),i=nt[a];return i===yt&&(i=nt[a]=w.find("tr").eq(a).find("td div")[0].offsetTop),Math.max(0,Math.round(i-1+E*(r%n/n)))}function vt(t,e){var n,r,a,i,o,s=Y("selectHelper");F.build(),s?0<=(n=$(t).col)&&n<H&&(r=F.rect(0,n,0,n,y),(a=ft(t,t))<(i=ft(t,e))&&(r.top=a,r.height=i-a,r.left+=2,r.width-=5,mt.isFunction(s)?(o=s(t,e))&&(r.position="absolute",b=mt(o).css(r).appendTo(y)):(r.isStart=!0,r.isEnd=!0,(b=mt(K({title:"",start:t,end:e,className:["fc-select-helper"],editable:!1},r))).css("opacity",Y("dragOpacity"))),b&&(it(b),y.append(b),Ht(b,r.width,!0),jt(b,r.height,!0)))):ut(t,e)}function gt(){V(),b&&(b.remove(),b=null)}function ht(t){var a;1==t.which&&Y("selectable")&&(J(t),R.start(function(t,e){var n,r;gt(),t&&t.col==e.col&&!ct(t)?(n=dt(e),r=dt(t),vt((a=[n,Dt(Ct(n),T),r,Dt(Ct(r),T)].sort(Nt))[0],a[3])):a=null},t),mt(document).one("mouseup",function(t){R.stop(),a&&(+a[0]==+a[1]&&pt(a[0],!1,t),X(a[0],a[3],!1,t))}))}function pt(t,e,n){G("dayClick",s[$(t).col],t,e,n)}qt(l.addClass("fc-agenda")),F=new Bt(function(t,n){var r,a,i;c.each(function(t,e){r=mt(e),a=r.offset().left,t&&(i[1]=a),i=[a],n[t]=i}),i[1]=a+r.outerWidth(),Y("allDaySlot")&&(a=(r=p).offset().top,t[0]=[a,a+r.outerHeight()]);var e=y.offset().top,o=m.offset().top,s=o+m.outerHeight();function l(t){return Math.max(o,Math.min(s,t))}for(var u=0;u<j*x;u++)t.push([l(e+k*u),l(e+k*(u+1))])}),R=new Vt(F),N=new Xt(function(t){return r.eq(t)}),z=new Xt(function(t){return u.eq(t)})}function Ot(t,e,n){n=n||[];for(var r,a,i=0;i<e.length;i++)r=t,a=e[i],r.end>a.start&&r.start<a.end&&n.push(e[i]);return n}function Wt(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||Lt(t,e)}function Lt(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function It(t,n,r){var _=this;_.element=t,_.calendar=n,_.name=r,_.opt=i,_.trigger=d,_.isEventDraggable=function(t){var e=t.source||{};return U(t.startEditable,e.startEditable,i("eventStartEditable"),t.editable,e.editable,i("editable"))&&!i("disableDragging")},_.isEventResizable=function(t){var e=t.source||{};return U(t.durationEditable,e.durationEditable,i("eventDurationEditable"),t.editable,e.editable,i("editable"))&&!i("disableResizing")},_.setEventData=function(t){c={};var e,n,r=t.length;for(e=0;e<r;e++)n=t[e],c[n._id]?c[n._id].push(n):c[n._id]=[n]},_.clearEventData=function(){c={},o={},a=[]},_.eventEnd=f,_.reportEventElement=function(t,e){a.push({event:t,element:e}),o[t._id]?o[t._id].push(e):o[t._id]=[e]},_.triggerEventDestroy=function(){mt.each(a,function(t,e){_.trigger("eventDestroy",e.event,e.event,e.element)})},_.eventElementHandlers=function(e,n){n.click(function(t){if(!n.hasClass("ui-draggable-dragging")&&!n.hasClass("ui-resizable-resizing"))return d("eventClick",this,e,t)}).hover(function(t){d("eventMouseover",this,e,t)},function(t){d("eventMouseout",this,e,t)})},_.showEvents=function(t,e){v(t,e,"show")},_.hideEvents=function(t,e){v(t,e,"hide")},_.eventDrop=function(t,e,n,r,a,i,o){var s=e.allDay,l=e._id;g(c[l],n,r,a),d("eventDrop",t,e,n,r,a,function(){g(c[l],-n,-r,s),u(l)},i,o),u(l)},_.eventResize=function(t,e,n,r,a,i){var o=e._id;h(c[o],n,r),d("eventResize",t,e,n,r,function(){h(c[o],-n,-r),u(o)},a,i),u(o)};var e=_.defaultEventEnd,s=n.normalizeEvent,u=n.reportEventChange,c={},o={},a=[],l=n.options;function i(t,e){var n=l[t];return mt.isPlainObject(n)?k(n,e||r):n}function d(t,e){return n.trigger.apply(n,[t,e||_].concat(Array.prototype.slice.call(arguments,2),[_]))}function f(t){return t.end?Ct(t.end):e(t)}function v(t,e,n){for(var r=o[t._id],a=r.length,i=0;i<a;i++)e&&r[i][0]==e[0]||r[i][n]()}function g(t,e,n,r){n=n||0;for(var a,i=t.length,o=0;o<i;o++)a=t[o],r!==yt&&(a.allDay=r),Dt(bt(a.start,e,!0),n),a.end&&(a.end=Dt(bt(a.end,e,!0),n)),s(a,l)}function h(t,e,n){n=n||0;for(var r,a=t.length,i=0;i<a;i++)(r=t[i]).end=Dt(bt(f(r),e,!0),n),s(r,l)}_.isHiddenDay=function(t){"object"==typeof t&&(t=t.getDay());return y[t]},_.skipHiddenDays=function(t,e,n){e=e||1;for(;y[(t.getDay()+(n?e:0)+7)%7];)bt(t,e)},_.getCellsPerWeek=function(){return p},_.dateToCell=function(t){return x(T(E(t)))},_.dateToDayOffset=E,_.dayOffsetToCellOffset=T,_.cellOffsetToCell=x,_.cellToDate=function(){return S(C(M.apply(null,arguments)))},_.cellToCellOffset=M,_.cellOffsetToDayOffset=C,_.dayOffsetToDate=S,_.rangeToSegments=function(t,e){for(var n=_.getRowCnt(),r=_.getColCnt(),a=[],i=E(t),o=E(e),s=T(i),l=T(o)-1,u=0;u<n;u++){var c,d,f,v,g,h=u*r,p=h+r-1,m=Math.max(s,h),y=Math.min(l,p);m<=y&&(c=x(m),d=x(y),f=[c.col,d.col].sort(),v=C(m)==i,g=C(y)+1==o,a.push({row:u,leftCol:f[0],rightCol:f[1],isStart:v,isEnd:g}))}return a};var p,m=i("hiddenDays")||[],y=[],w=[],b=[],D=i("isRTL");function M(t,e){var n=_.getColCnt(),r=D?-1:1,a=D?n-1:0;return"object"==typeof t&&(e=t.col,t=t.row),t*n+(e*r+a)}function C(t){var e=_.visStart.getDay();return t+=w[e],7*Math.floor(t/p)+b[(t%p+p)%p]-e}function S(t){var e=Ct(_.visStart);return bt(e,t),e}function E(t){return Et(t,_.visStart)}function T(t){var e=_.visStart.getDay();return t+=e,Math.floor(t/7)*p+w[(t%7+7)%7]-w[e]}function x(t){var e=_.getColCnt(),n=D?-1:1,r=D?e-1:0;return{row:Math.floor(t/e),col:(t%e+e)%e*n+r}}!function(){!1===i("weekends")&&m.push(0,6);for(var t=0,e=0;t<7;t++)w[t]=e,y[t]=-1!=mt.inArray(t,m),y[t]||(b[e]=t,e++);if(!(p=e))throw"invalid hiddenDays"}()}function Pt(){var r=this;r.renderDayEvents=function(t,e){var n=N(t,!1,!0);K(n,function(t,e){a(t.event,e)}),function(t,a){var e=m();K(t,function(t,e,n){var r=t.event;r._id===a?z(r,e,t):e[0]._fci=n}),kt(e,t,z)}(n,e),K(n,function(t,e){y("eventAfterRender",t.event,t.event,e)})},r.draggableDayEvent=function(o,s){var l,n=T();s.draggable({delay:50,opacity:u("dragOpacity"),revertDuration:u("dragRevertDuration"),start:function(t,e){y("eventDragStart",s,o,t,e),b(o,s),n.start(function(t,e,n,r){var a,i;s.draggable("option","revert",!t||!n&&!r),E(),t?(a=k(e),i=k(t),l=Et(i,a),S(bt(Ct(o.start),l),bt(xt(o),l))):l=0},t,"drag")},stop:function(t,e){n.stop(),E(),y("eventDragStop",s,o,t,e),l?d(this,o,l,0,o.allDay,t,e):(s.css("filter",""),w(o,s))}})},r.resizableDayEvent=function(h,n,p){var m=u("isRTL")?"w":"e",t=n.find(".ui-resizable-"+m),r=!1;qt(n),n.mousedown(function(t){t.preventDefault()}).click(function(t){r&&(t.preventDefault(),t.stopImmediatePropagation())}),t.mousedown(function(t){var e,c,d,f,v,g;1==t.which&&(r=!0,e=T(),D(),M(),c=n.css("top"),v=mt.extend({},h),g=R(F(h.start)),s(),mt("body").css("cursor",m+"-resize").one("mouseup",function(t){y("eventResizeStop",this,h,t),mt("body").css("cursor",""),e.stop(),E(),d&&o(this,h,d,0,t);setTimeout(function(){r=!1},0)}),y("eventResizeStart",this,h,t),e.start(function(t,e){var n,r,a,i,o,s,l,u;t&&(n=H(e),a=H(t),a=Math.max(a,g),(d=j(a)-j(n))?(v.end=bt(_(h),d,!0),r=f,i=v,o=p.row,s=c,l=N([i],!0,!1),u=[],K(l,function(t,e){t.row===o&&e.css("top",s),u.push(e[0])}),(f=mt(f=u)).find("*").css("cursor",m+"-resize"),r&&r.remove(),b(h)):f&&(w(h),f.remove(),f=null),E(),S(h.start,bt(xt(h),d)))},t))})};var u=r.opt,y=r.trigger,l=r.isEventDraggable,c=r.isEventResizable,_=r.eventEnd,a=r.reportEventElement,i=r.eventElementHandlers,w=r.showEvents,b=r.hideEvents,d=r.eventDrop,o=r.eventResize,D=r.getRowCnt,M=r.getColCnt,f=(r.getColWidth,r.allDayRow),v=r.colLeft,g=r.colRight,h=r.colContentLeft,p=r.colContentRight,m=(r.dateToCell,r.getDaySegmentContainer),C=r.calendar.formatDates,S=r.renderDayOverlay,E=r.clearOverlays,s=r.clearSelection,T=r.getHoverListener,x=r.rangeToSegments,k=r.cellToDate,H=r.cellToCellOffset,j=r.cellOffsetToDayOffset,F=r.dateToDayOffset,R=r.dayOffsetToCellOffset;function N(t,e,n){var r,a,i=m(),o=e?mt("<div/>"):i,s=function(t){for(var e=[],n=0;n<t.length;n++){var r=function(t){for(var e=t.start,n=xt(t),r=x(e,n),a=0;a<r.length;a++)r[a].event=t;return r}(t[n]);e.push.apply(e,r)}return e}(t);return function(t){for(var e=u("isRTL"),n=0;n<t.length;n++){var r=t[n],a=(e?r.isEnd:r.isStart)?h:v,i=(e?r.isStart:r.isEnd)?p:g,o=a(r.leftCol),s=i(r.rightCol);r.left=o,r.outerWidth=s-o}}(s),r=function(t){for(var e="",n=0;n<t.length;n++)e+=function(t){var e="",n=u("isRTL"),r=t.event,a=r.url,i=["fc-event","fc-event-hori"];l(r)&&i.push("fc-event-draggable");t.isStart&&i.push("fc-event-start");t.isEnd&&i.push("fc-event-end");i=i.concat(r.className),r.source&&(i=i.concat(r.source.className||[]));var o=Qt(r,u);e+=a?"<a href='"+zt(a)+"'":"<div";e+=" class='"+i.join(" ")+"' style='position:absolute;left:"+t.left+"px;"+o+"'><div class='fc-event-inner'>",!r.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+zt(C(r.start,r.end,u("timeFormat")))+"</span>");e+="<span class='fc-event-title'>"+zt(r.title||"")+"</span></div>",t.isEnd&&c(r)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>");return e+="</"+(a?"a":"div")+">"}(t[n]);return e}(s),o[0].innerHTML=r,a=o.children(),e&&i.append(a),function(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=r.event,i=e.eq(n),o=y("eventRender",a,a,i);!1===o?i.remove():(o&&!0!==o&&(o=mt(o).css({position:"absolute",left:r.left}),i.replaceWith(o),i=o),r.element=i)}}(s,a),K(s,function(t,e){t.hsides=Ft(e,!0)}),K(s,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),K(s,function(t,e){t.outerHeight=e.outerHeight(!0)}),function(t,e){var n=function(t){for(var e=D(),n=M(),r=[],a=function(t){var e,n,r,a=D(),i=[];for(e=0;e<t.length;e++)n=t[e],r=n.row,n.element&&(i[r]?i[r].push(n):i[r]=[n]);for(r=0;r<a;r++)i[r]=function(t){for(var e=[],n=function(t){t.sort(Z);for(var e=[],n=0;n<t.length;n++){for(var r=t[n],a=0;a<e.length&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(r.leftCol<=t.rightCol&&r.rightCol>=t.leftCol)return!0}return!1}(r,e[a]);a++);e[a]?e[a].push(r):e[a]=[r]}return e}(t),r=0;r<n.length;r++)e.push.apply(e,n[r]);return e}(i[r]||[]);return i}(t),i=0;i<e;i++){for(var o=a[i],s=[],l=0;l<n;l++)s.push(0);for(var u=0;u<o.length;u++){var c=o[u];c.top=X(s.slice(c.leftCol,c.rightCol+1));for(l=c.leftCol;l<=c.rightCol;l++)s[l]=c.top+c.outerHeight}r.push(X(s))}return r}(t),r=function(){var t,e=D(),n=[];for(t=0;t<e;t++)n[t]=f(t).find("div.fc-day-content > div");return n}(),a=[];if(e)for(var i=0;i<r.length;i++)r[i].height(n[i]);for(i=0;i<r.length;i++)a.push(r[i].position().top);K(t,function(t,e){e.css("top",a[t.row]+t.top)})}(s,n),s}function z(t,e,n){l(t)&&r.draggableDayEvent(t,e,n),n.isEnd&&c(t)&&r.resizableDayEvent(t,e,n),i(t,e)}}function K(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=r.element;a&&e(r,a,n)}}function Z(t,e){return e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function Yt(){var o=this;o.select=function(t,e,n){c(),e=e||r(t,n);l(t,e,n),d(t,e,n)},o.unselect=c,o.reportSelection=d,o.daySelectionMousedown=function(t){var n,r=o.cellToDate,a=o.getIsCellAllDay,e=o.getHoverListener(),i=o.reportDayClick;{1==t.which&&s("selectable")&&(c(t),e.start(function(t,e){u(),t&&a(t)?(n=[r(e),r(t)].sort(Nt),l(n[0],n[1],!0)):n=null},t),mt(document).one("mouseup",function(t){e.stop(),n&&(+n[0]==+n[1]&&i(n[0],!0,t),d(n[0],n[1],!0,t))}))}};var s=o.opt,a=o.trigger,r=o.defaultSelectionEnd,l=o.renderSelection,u=o.clearSelection,i=!1;function c(t){i&&(i=!1,u(),a("unselect",null,t))}function d(t,e,n,r){i=!0,a("select",null,t,e,n,r)}s("selectable")&&s("unselectAuto")&&mt(document).mousedown(function(t){var e=s("unselectCancel");e&&mt(t.target).parents(e).length||c(t)})}function Gt(){this.renderOverlay=function(t,e){var n=a.shift();n=n||mt("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>");n[0].parentNode!=e[0]&&n.appendTo(e);return r.push(n.css(t).show()),n},this.clearOverlays=function(){var t;for(;t=r.shift();)a.push(t.hide().unbind())};var r=[],a=[]}function Bt(t){var s,l;this.build=function(){t(s=[],l=[])},this.cell=function(t,e){for(var n=s.length,r=l.length,a=-1,i=-1,o=0;o<n;o++)if(e>=s[o][0]&&e<s[o][1]){a=o;break}for(o=0;o<r;o++)if(t>=l[o][0]&&t<l[o][1]){i=o;break}return 0<=a&&0<=i?{row:a,col:i}:null},this.rect=function(t,e,n,r,a){var i=a.offset();return{top:s[t][0]-i.top,left:l[e][0]-i.left,width:l[r][1]-l[e][0],height:s[n][1]-s[t][0]}}}function Vt(r){var a,i,o,s;function l(t){var e;(e=t).pageX===yt&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY);var n=r.cell(t.pageX,t.pageY);!n==!s&&(!n||n.row==s.row&&n.col==s.col)||(n?i(n,o=o||n,n.row-o.row,n.col-o.col):i(n,o),s=n)}this.start=function(t,e,n){i=t,o=s=null,r.build(),l(e),a=n||"mousemove",mt(document).bind(a,l)},this.stop=function(){return mt(document).unbind(a,l),s}}function Xt(e){var n=this,r={},a={},i={};function o(t){return r[t]=r[t]||e(t)}n.left=function(t){return a[t]=a[t]===yt?o(t).position().left:a[t]},n.right=function(t){return i[t]=i[t]===yt?n.left(t)+o(t).width():i[t]},n.clear=function(){r={},a={},i={}}}q.dateFormatters=h,q.applyAll=J,A.month=function(t,e){var u=this;u.render=function(t,e){e&&(I(t,e),t.setDate(1));var n=c("firstDay"),r=Ct(t,!0);r.setDate(1);var a=I(Ct(r),1),i=Ct(r);bt(i,-(i.getDay()-n+7)%7),f(i);var o=Ct(a);bt(o,(7-o.getDay()+n)%7),f(o,-1,!0);var s=v(),l=Math.round(Et(o,i)/7);"fixed"==c("weekMode")&&(bt(o,7*(6-l)),l=6);u.title=g(r,c("titleFormat")),u.start=r,u.end=a,u.visStart=i,u.visEnd=o,d(l,s,!0)},p.call(u,t,e,"month");var c=u.opt,d=u.renderBasic,f=u.skipHiddenDays,v=u.getCellsPerWeek,g=e.formatDate},A.basicWeek=function(t,e){var s=this;s.render=function(t,e){e&&bt(t,7*e);var n=bt(Ct(t),-(t.getDay()-l("firstDay")+7)%7),r=bt(Ct(n),7),a=Ct(n);c(a);var i=Ct(r);c(i,-1,!0);var o=d();s.start=n,s.end=r,s.visStart=a,s.visEnd=i,s.title=f(a,bt(Ct(i),-1),l("titleFormat")),u(1,o,!1)},p.call(s,t,e,"basicWeek");var l=s.opt,u=s.renderBasic,c=s.skipHiddenDays,d=s.getCellsPerWeek,f=e.formatDates},A.basicDay=function(t,e){var a=this;a.render=function(t,e){e&&bt(t,e);s(t,e<0?-1:1);var n=Ct(t,!0),r=bt(Ct(n),1);a.title=l(t,i("titleFormat")),a.start=a.visStart=n,a.end=a.visEnd=r,o(1,1,!1)},p.call(a,t,e,"basicDay");var i=a.opt,o=a.renderBasic,s=a.skipHiddenDays,l=e.formatDate},e({weekMode:"fixed"}),A.agendaWeek=function(t,e){var s=this;s.render=function(t,e){e&&bt(t,7*e);var n=bt(Ct(t),-(t.getDay()-l("firstDay")+7)%7),r=bt(Ct(n),7),a=Ct(n);c(a);var i=Ct(r);c(i,-1,!0);var o=d();s.title=f(a,bt(Ct(i),-1),l("titleFormat")),s.start=n,s.end=r,s.visStart=a,s.visEnd=i,u(o)},v.call(s,t,e,"agendaWeek");var l=s.opt,u=s.renderAgenda,c=s.skipHiddenDays,d=s.getCellsPerWeek,f=e.formatDates},A.agendaDay=function(t,e){var a=this;a.render=function(t,e){e&&bt(t,e);s(t,e<0?-1:1);var n=Ct(t,!0),r=bt(Ct(n),1);a.title=l(t,i("titleFormat")),a.start=a.visStart=n,a.end=a.visEnd=r,o(1)},v.call(a,t,e,"agendaDay");var i=a.opt,o=a.renderAgenda,s=a.skipHiddenDays,l=e.formatDate},e({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery);var THEMEMAKERS_EVENT_COUNTDOWN=function(e,n){var r={diff_time:null,container:null,intervalID:null,init:function(){var t=new Date;r.diff_time=e-t/1e3,r.container=jQuery(n),r.update_timer_view(),r.intervalID=setInterval(r.update_timer_view,999)},update_timer_view:function(){r.diff_time--,r.diff_time<=0?clearInterval(r.intervalID):(jQuery(r.container).find("span.event-numbers").eq(0).html(r.get_days(r.diff_time)),jQuery(r.container).find("span.event-numbers").eq(1).html(r.get_hours(r.diff_time)),jQuery(r.container).find("span.event-numbers").eq(2).html(r.get_minutes(r.diff_time)),jQuery(r.container).find("span.event-numbers").eq(3).html(r.get_seconds(r.diff_time)))},get_days:function(t){var e=parseInt(t/86400);return e=e<10?"0"+e:e},get_hours:function(t){var e=parseInt(t/3600%24);return e=e<10?"0"+e:e},get_minutes:function(t){var e=parseInt(t/60%60);return e=e<10?"0"+e:e},get_seconds:function(t){var e=parseInt(t%60);return e=e<10?"0"+e:e}};return r},THEMEMAKERS_EVENT_CALENDAR=function(i,arguments,c,d){var o={arguments:arguments,init:function(){var t=new Date,e=(t.getDate(),parseInt(t.getMonth()),t.getFullYear(),"app_events_get_calendar_data"),n=[lang_sun,lang_mon,lang_tue,lang_wed,lang_thu,lang_fri,lang_sat];if(c){var r,e="app_events_get_widget_calendar_data";for(r in n)n[r]=n[r].substr(0,1)}jQuery(document).on("click",".calendar_event_tooltip_close",function(){return jQuery(this).parent().hide(222,function(){jQuery(this).remove()}),!1});var a="H:mm";"1"==events_time_format&&(a="h(:mm)tt"),jQuery(i).fullCalendar({theme:!1,header:{left:o.arguments.header.left,center:o.arguments.header.center,right:o.arguments.header.right},editable:!1,firstDay:o.arguments.first_day,monthNames:[lang_january,lang_february,lang_march,lang_april,lang_may,lang_june,lang_july,lang_august,lang_september,lang_october,lang_november,lang_december],dayNames:[lang_sunday,lang_monday,lang_tuesday,lang_wednesday,lang_thursday,lang_friday,lang_saturday],dayNamesShort:n,ignoreTimezone:1,buttonText:{today:lang_today,month:lang_month,week:lang_week,day:lang_day},eventSources:[{url:ajaxurl,type:"POST",data:{action:e},error:function(){},color:"",textColor:""}],timeFormat:a,eventClick:function(t,e,n){return!0},eventMouseover:function(t,e,n){if(c)return!1;function r(t){return 0<=t&&t<10?"0"+t:t+""}jQuery(".calendar_event_tooltip").remove();var a,i,o,s,l=[],u='<span class="calendar_event_tooltip" style="top:'+e.pageY+"px;left:"+e.pageX+'px;">';return u+='<h4><a href="'+t.url+'">'+t.title+"</a></h4>",events_show_tooltip_image&&void 0!==t.featured_image_src&&0<t.featured_image_src.length&&(u+='<a class="calendar_event_tooltip_url" href="'+t.url+'"><img class="calendar_event_tooltip_img" src="'+t.featured_image_src+'" alt="'+t.title+'" /></a>'),events_show_tooltip_time&&(l=1==events_date_format?[[r(t.start.getDate()),r(t.start.getMonth()+1),t.start.getFullYear()].join("/"),[r(t.start.getHours()),r(t.start.getMinutes())].join(":")].join(" - "):[[r(t.start.getMonth()+1),r(t.start.getDate()),t.start.getFullYear()].join("/"),[r(t.start.getHours()),r(t.start.getMinutes())].join(":")].join(" - "),1==events_time_format&&(l=(l=l.split(" "))[0],o=11<(a=t.start.getHours())?"pm":"am",12<a&&(a-=12),0==a&&(a=12),0==(i=t.start.getMinutes())&&(i=""),l=l+" "+a+(""!=i?":":"")+i+o),u+='<span class="calendar_event_tooltip_timezone"><b>'+lang_time+"</b>: "+l+" "+d+"</span>"),events_show_tooltip_place&&(u+='<span class="calendar_event_tooltip_place"><b>'+lang_place+"</b>: "+(""!=t.event_place_address?t.event_place_address:" -")+"</span>"),events_show_tooltip_desc&&(s=t.post_excerpt,events_tooltip_desc_symbols_count&&s.length>events_tooltip_desc_symbols_count&&(s=s.substr(0,events_tooltip_desc_symbols_count)+" ..."),u+='<span class="calendar_event_tooltip_description">'+s+"</span>"),u+="</span>",jQuery("body").append(u),!0},eventMouseout:function(t,e,n){return jQuery(".calendar_event_tooltip").remove(),!0}})}};return o},THEMEMAKERS_EVENT_EVENTS_LISTING=function(){var i={floor_month:null,floor_year:null,curent_events_time:null,events_on_page:0,articles_on_page:5,spinner:"",init:function(n){i.floor_month=i.get_current_month(),i.floor_year=i.get_current_year(),i.articles_on_page=parseInt(n.count),i.spinner=jQuery('<div id="tmm_events_spinner" class="spinner">\t\t\t\t\t\t\t\t<div id="spinningSquaresG">\t\t\t\t\t\t\t\t\t<div id="spinningSquaresG_1" class="spinningSquaresG"></div>\t\t\t\t\t\t\t\t\t<div id="spinningSquaresG_2" class="spinningSquaresG"></div>\t\t\t\t\t\t\t\t\t<div id="spinningSquaresG_3" class="spinningSquaresG"></div>\t\t\t\t\t\t\t\t\t<div id="spinningSquaresG_4" class="spinningSquaresG"></div>\t\t\t\t\t\t\t\t\t<div id="spinningSquaresG_5" class="spinningSquaresG"></div>\t\t\t\t\t\t\t\t\t<div id="spinningSquaresG_6" class="spinningSquaresG"></div>\t\t\t\t\t\t\t\t\t<div id="spinningSquaresG_7" class="spinningSquaresG"></div>\t\t\t\t\t\t\t\t\t<div id="spinningSquaresG_8" class="spinningSquaresG"></div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>'),jQuery("#event_listing_period").length&&!jQuery("#events_listing_month").length&&jQuery(".page-title > h1").length&&jQuery(".page-title > h1").append('&nbsp;<span id="events_listing_month"></span> <span id="events_listing_year"></span>'),n.page_num=0,i.update_events_listing(n),jQuery("#event_listing_period").change(function(){var t=n;t.start=jQuery(this).val(),t.end=jQuery(this).find("option").filter(":selected").data("end"),t.page_num=0,i.update_events_listing(t)}),jQuery(".events_listing_navigation").on("click","a",function(){var t=n,e=jQuery("#event_listing_period");return e.length&&(t.start=e.val(),t.end=e.find("option").filter(":selected").data("end")),t.page_num=jQuery(this).data("page-id"),jQuery("#events_listing > article, .events_listing_navigation").hide(),i.update_events_listing(t),jQuery("html, body").animate({scrollTop:0},300),!1})},update_events_listing:function(e){jQuery("#events_listing").append(i.spinner),i.curent_events_time=e.start,e.category||(e.category=0),jQuery("#app_event_listing_categories").length&&(e.category=jQuery("#app_event_listing_categories").val());var t={action:"app_events_get_events_listing",events_list_args:e};jQuery.post(ajaxurl,t,function(t){t=jQuery.parseJSON(t),jQuery("#events_listing_month").html(t.month),jQuery("#events_listing_year").html(t.year),11<t.html.length?(jQuery("#events_listing").html(t.html),window.Tmm_animateElements?setTimeout(function(){window.Tmm_animateElements()},300):jQuery("#events_listing").find("article").animate({opacity:1},300),i.events_on_page=parseInt(t.count),i.check_pagination(),i.draw_pagination(e.page_num)):(jQuery("#events_listing").html('<li class="tmm_no_events">'+tmm_lang_no_events+"</li>"),i.check_pagination()),jQuery("#tmm_events_spinner").remove()})},check_pagination:function(){i.events_on_page>i.articles_on_page?jQuery(".events_listing_navigation").show():jQuery(".events_listing_navigation").hide()},draw_pagination:function(t){jQuery(".events_listing_navigation").html(""),t=parseInt(t);for(var e=0;e<Math.ceil(i.events_on_page/i.articles_on_page);e++){var n,r="page-numbers",a="a";e===t&&(r+=" current",a="span"),n="<"+a+' class="'+r+'" data-page-id="'+e+'">'+(e+1)+"</"+a+">",jQuery(".events_listing_navigation").append(jQuery(n))}},daysInMonth:function(t,e){return new Date(e,t,0).getDate()},get_current_month:function(){var t=new Date;return parseInt(t.getMonth(),10)+1},get_current_year:function(){var t=new Date;return parseInt(t.getFullYear(),10)},get_mk_time:function(){var t=new Date;return Math.floor(t.getTime()/1e3)}};return i};